{"version":3,"sources":["dist/webapp.js","../../../AppData/Roaming/npm/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["App","nomnoml","codeMirror","saveAs","_","_this","signals","Observable","on","off","body","document","querySelector","lineNumbers","getElementById","lineMarker","textarea","canvasElement","canvasPanner","canvasTools","editor","fromTextArea","mode","matchBrackets","theme","keyMap","cm","dragEvent","files","dataTransfer","type","preventDefault","handleOpeningFiles","editorElement","getWrapperElement","filesystem","FileSystem","devenv","DevEnv","panner","CanvasPanner","sourceChanged","throttle","downloader","DownloadLinks","HoverMarker","Tooltips","querySelectorAll","defaultSource","innerHTML","lastValidSource","reloadStorage","configureByRoute","location","hash","source","storage","read","setValue","window","addEventListener","leading","debounce","clearState","getValue","model","draw","zoom","positionCanvas","save","setFilename","config","title","trigger","e","setError","prototype","loadSvg","svg","svgNodes","DOMParser","parseFromString","getElementsByTagName","length","alert","code","childNodes","nodeValue","unescape","currentSource","magnifyViewport","diff","magnify","resetViewport","reset","toggleSidebar","id","sidebars","_i","sidebars_1","key","classList","remove","toggle","add","discardCurrentGraph","confirm","saveViewModeToStorage","question","moveToLocalStorage","href","exitViewMode","reader","FileReader","onload","result","readAsText","element","onChange","offset","x","y","zoomLevel","superSampling","devicePixelRatio","mouseDownPoint","isVec","value","mouseMove","skanaar","vector","pageX","pageY","mouseUp","style","width","Math","min","deltaY","mouseDown","passive","viewport","w","h","height","top","innerHeight","left","innerWidth","exp","marker","error","matches","message","match","lineHeightValue","getComputedStyle","lineHeight","parseFloat","filename","pngDownload","dynamic","msToBlob","toBlob","blob","svgDownload","renderSvg","Blob","srcDownload","src","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","DefaultGraphStore","JSON","parse","localStorage","setFiles","index","stringify","moveToFileStorage","name","entry","date","Date","toISOString","backingStore","push","sort","a","localeCompare","fileStore","LocalFileGraphStore","discard","clear","filter","path","route","Route","from","routedStorage","activeFile","find","context","UrlGraphStore","decodeURIComponent","LocalGraphStore","removeItem","_super","call","kind","className","elementToMark","hoverables","classToggler","state","hoverables_1","callbacks","event","fn","fns","indexOf","splice","args","arguments","forEach","apply","slashIndex","urlDecode","substr","urlEncode","unencoded","encodeURIComponent","replace","encoded","tooltip","links","i","attach","link","onmouseover","textContent","getAttribute","onmouseout","ensureType","template","obj","isArray","map","undefined","assert","actual","equal","expected","as","bs","Error","test_ensureType","ExportMenu","selector","app","Vue","el","data","shareLink","mounted","onSourceChange","$forceUpdate","methods","downloadPng","downloadSvg","downloadSrc","FileMenu","items","isActive","item","isLocalFile","isAtHome","itemPath","prompt","some","target","icon","icons","component","props","header","StorageTools","isUrlStorage","isLocalFileStorage","dist","mag","mult","v","factor","sqrt","normalize","rot","plucker","pluckerDef","max","list","transform","maximum","sum","summation","len","flatten","lists","out","concat","predicate","last","hasSubstring","haystack","needle","format","parts","matrix","split","output","join","merged","assign","indexBy","uniqueBy","seen","getKey","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","console","hmrApply","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","stack","overlay","createErrorOverlay","appendChild","createElement","stackTrace","innerText","getParents","modules","parents","k","dep","Function","deps","cached","cache","cb"],"mappings":"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","file":"webapp.e677fe55.js","sourceRoot":"..","sourcesContent":["var App = function() {\r\n    function App(nomnoml, codeMirror, saveAs, _) {\r\n        var _this = this;\r\n        this._ = _;\r\n        this.signals = new Observable;\r\n        this.on = this.signals.on;\r\n        this.off = this.signals.off;\r\n        var body = document.querySelector(\"body\");\r\n        var lineNumbers = document.getElementById(\"linenumbers\");\r\n        var lineMarker = document.getElementById(\"linemarker\");\r\n        var textarea = document.getElementById(\"textarea\");\r\n        var canvasElement = document.getElementById(\"canvas\");\r\n        var canvasPanner = document.getElementById(\"canvas-panner\");\r\n        var canvasTools = document.getElementById(\"canvas-tools\");\r\n        this.editor = codeMirror.fromTextArea(textarea, {\r\n            lineNumbers: true,\r\n            mode: \"nomnoml\",\r\n            matchBrackets: true,\r\n            theme: \"solarized light\",\r\n            keyMap: \"sublime\"\r\n        });\r\n        this.editor.on(\"drop\", function(cm, dragEvent) {\r\n            var files = dragEvent.dataTransfer.files;\r\n            if (files[0].type == \"image/svg+xml\") {\r\n                dragEvent.preventDefault();\r\n                _this.handleOpeningFiles(files)\r\n            }\r\n        });\r\n        var editorElement = this.editor.getWrapperElement();\r\n        this.filesystem = new FileSystem;\r\n        var devenv = new DevEnv(editorElement, lineMarker, lineNumbers);\r\n        this.panner = new CanvasPanner(canvasPanner, function() {\r\n            return _this.sourceChanged()\r\n        }, _.throttle);\r\n        this.downloader = new DownloadLinks(canvasElement, saveAs);\r\n        new HoverMarker(\"canvas-mode\", body, [canvasPanner, canvasTools]);\r\n        new Tooltips(document.getElementById(\"tooltip\"), document.querySelectorAll(\".tools a\"));\r\n        this.defaultSource = (document.getElementById(\"defaultGraph\") || {\r\n            innerHTML: \"\"\r\n        }).innerHTML;\r\n        var lastValidSource = null;\r\n        var reloadStorage = function() {\r\n            lastValidSource = null;\r\n            _this.filesystem.configureByRoute(location.hash);\r\n            var source = _this.filesystem.storage.read() || \"\";\r\n            _this.editor.setValue(source || _this.defaultSource);\r\n            _this.sourceChanged()\r\n        };\r\n        window.addEventListener(\"hashchange\", function() {\r\n            return reloadStorage()\r\n        });\r\n        window.addEventListener(\"resize\", _.throttle(function() {\r\n            return _this.sourceChanged()\r\n        }, 750, {\r\n            leading: true\r\n        }));\r\n        this.editor.on(\"changes\", _.debounce(function() {\r\n            return _this.sourceChanged()\r\n        }, 300));\r\n        this.sourceChanged = function() {\r\n            try {\r\n                devenv.clearState();\r\n                var source = _this.editor.getValue();\r\n                var model = nomnoml.draw(canvasElement, source, _this.panner.zoom());\r\n                lastValidSource = source;\r\n                _this.panner.positionCanvas(canvasElement);\r\n                _this.filesystem.storage.save(source);\r\n                _this.downloader.source = source;\r\n                _this.downloader.setFilename(model.config.title);\r\n                _this.signals.trigger(\"source-changed\", source)\r\n            } catch (e) {\r\n                devenv.setError(e);\r\n                if (lastValidSource) {\r\n                    nomnoml.draw(canvasElement, lastValidSource, _this.panner.zoom())\r\n                }\r\n                _this.panner.positionCanvas(canvasElement)\r\n            }\r\n        };\r\n        reloadStorage()\r\n    }\r\n    App.prototype.loadSvg = function(svg) {\r\n        var svgNodes = (new DOMParser).parseFromString(svg, \"text/xml\");\r\n        if (svgNodes.getElementsByTagName(\"desc\").length !== 1) {\r\n            alert(\"SVG did not have nomnoml code embedded within it.\");\r\n            return\r\n        }\r\n        var code = svgNodes.getElementsByTagName(\"desc\")[0].childNodes[0].nodeValue;\r\n        code = this._.unescape(code);\r\n        this.editor.setValue(code)\r\n    };\r\n    App.prototype.currentSource = function() {\r\n        return this.editor.getValue()\r\n    };\r\n    App.prototype.magnifyViewport = function(diff) {\r\n        this.panner.magnify(diff)\r\n    };\r\n    App.prototype.resetViewport = function() {\r\n        this.panner.reset()\r\n    };\r\n    App.prototype.toggleSidebar = function(id) {\r\n        var sidebars = [\"about\", \"reference\", \"export\", \"files\"];\r\n        for (var _i = 0, sidebars_1 = sidebars; _i < sidebars_1.length; _i++) {\r\n            var key = sidebars_1[_i];\r\n            if (id !== key) document.getElementById(key).classList.remove(\"visible\")\r\n        }\r\n        document.getElementById(id).classList.toggle(\"visible\");\r\n        document.getElementById(\"file-system-hint\").classList.add(\"hidden\")\r\n    };\r\n    App.prototype.discardCurrentGraph = function() {\r\n        if (confirm(\"Do you want to discard current diagram and load the default example?\")) {\r\n            this.editor.setValue(this.defaultSource);\r\n            this.sourceChanged()\r\n        }\r\n    };\r\n    App.prototype.saveViewModeToStorage = function() {\r\n        var question = \"Do you want to overwrite the diagram in \" + \"localStorage with the currently viewed diagram?\";\r\n        if (confirm(question)) {\r\n            this.filesystem.moveToLocalStorage(this.currentSource());\r\n            window.location.href = \"./\"\r\n        }\r\n    };\r\n    App.prototype.exitViewMode = function() {\r\n        window.location.href = \"./\"\r\n    };\r\n    App.prototype.handleOpeningFiles = function(files) {\r\n        var _this = this;\r\n        if (files.length !== 1) {\r\n            alert(\"You can only upload one file at a time.\");\r\n            return\r\n        }\r\n        var reader = new FileReader;\r\n        reader.onload = function() {\r\n            return _this.loadSvg(reader.result)\r\n        };\r\n        reader.readAsText(files[0])\r\n    };\r\n    return App\r\n}();\r\nvar CanvasPanner = function() {\r\n    function CanvasPanner(element, onChange, throttle) {\r\n        var _this = this;\r\n        this.onChange = onChange;\r\n        this.offset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.zoomLevel = 0;\r\n        this.superSampling = window.devicePixelRatio || 1;\r\n        var mouseDownPoint = false;\r\n\r\n        function isVec(value) {\r\n            return value != false\r\n        }\r\n        var mouseMove = function(e) {\r\n            if (isVec(mouseDownPoint)) {\r\n                _this.offset = nomnoml.skanaar.vector.diff({\r\n                    x: e.pageX,\r\n                    y: e.pageY\r\n                }, mouseDownPoint);\r\n                onChange()\r\n            }\r\n        };\r\n        var mouseUp = function() {\r\n            mouseDownPoint = false;\r\n            element.style.width = \"33%\"\r\n        };\r\n        var magnify = function(e) {\r\n            _this.zoomLevel = Math.min(10, _this.zoomLevel - (e.deltaY < 0 ? -1 : 1));\r\n            onChange()\r\n        };\r\n        var mouseDown = function(e) {\r\n            element.style.width = \"100%\";\r\n            mouseDownPoint = nomnoml.skanaar.vector.diff({\r\n                x: e.pageX,\r\n                y: e.pageY\r\n            }, _this.offset)\r\n        };\r\n        element.addEventListener(\"mousedown\", mouseDown);\r\n        element.addEventListener(\"mouseup\", mouseUp);\r\n        element.addEventListener(\"mouseleave\", mouseUp);\r\n        element.addEventListener(\"wheel\", throttle(magnify, 50), {\r\n            passive: true\r\n        });\r\n        element.addEventListener(\"mousemove\", throttle(mouseMove, 50), {\r\n            passive: true\r\n        })\r\n    }\r\n    CanvasPanner.prototype.positionCanvas = function(element) {\r\n        var viewport = window;\r\n        var w = element.width / this.superSampling;\r\n        var h = element.height / this.superSampling;\r\n        element.style.top = 300 * (1 - h / viewport.innerHeight) + this.offset.y + \"px\";\r\n        element.style.left = 150 + (viewport.innerWidth - w) / 2 + this.offset.x + \"px\";\r\n        element.style.width = w + \"px\";\r\n        element.style.height = h + \"px\"\r\n    };\r\n    CanvasPanner.prototype.zoom = function() {\r\n        return this.superSampling * Math.exp(this.zoomLevel / 10)\r\n    };\r\n    CanvasPanner.prototype.magnify = function(diff) {\r\n        this.zoomLevel = Math.min(10, this.zoomLevel + diff);\r\n        this.onChange()\r\n    };\r\n    CanvasPanner.prototype.reset = function() {\r\n        this.zoomLevel = 1;\r\n        this.offset = {\r\n            x: 0,\r\n            y: 0\r\n        };\r\n        this.onChange()\r\n    };\r\n    return CanvasPanner\r\n}();\r\nvar DevEnv = function() {\r\n    function DevEnv(editor, marker, lineNumbers) {\r\n        this.editor = editor;\r\n        this.marker = marker;\r\n        this.lineNumbers = lineNumbers\r\n    }\r\n    DevEnv.prototype.clearState = function() {\r\n        this.marker.style.top = \"-30px\";\r\n        this.lineNumbers.classList.remove(\"error\")\r\n    };\r\n    DevEnv.prototype.setError = function(error) {\r\n        this.lineNumbers.classList.add(\"error\");\r\n        var matches = error.message.match(\"line ([0-9]*)\");\r\n        if (matches) {\r\n            var lineHeightValue = window.getComputedStyle(this.editor).lineHeight;\r\n            var lineHeight = parseFloat(lineHeightValue) || 12;\r\n            this.marker.style.top = 3 + lineHeight * +matches[1] + \"px\"\r\n        } else {\r\n            throw error\r\n        }\r\n    };\r\n    return DevEnv\r\n}();\r\nvar DownloadLinks = function() {\r\n    function DownloadLinks(canvasElement, saveAs) {\r\n        this.canvasElement = canvasElement;\r\n        this.saveAs = saveAs;\r\n        this.filename = \"graph\";\r\n        this.source = \"\"\r\n    }\r\n    DownloadLinks.prototype.pngDownload = function() {\r\n        var _this = this;\r\n        var dynamic = this.canvasElement;\r\n        if (!!dynamic.msToBlob) {\r\n            this.saveAs(dynamic.msToBlob(), this.filename + \".png\")\r\n        } else {\r\n            this.canvasElement.toBlob(function(blob) {\r\n                return _this.saveAs(blob, _this.filename + \".png\")\r\n            })\r\n        }\r\n    };\r\n    DownloadLinks.prototype.svgDownload = function() {\r\n        var dynamic = nomnoml;\r\n        var svg = dynamic.renderSvg(this.source, this.canvasElement);\r\n        this.saveAs(new Blob([svg], {\r\n            type: \"image/svg+xml\"\r\n        }), this.filename + \".svg\")\r\n    };\r\n    DownloadLinks.prototype.srcDownload = function() {\r\n        var src = this.source;\r\n        this.saveAs(new Blob([src], {\r\n            type: \"text/txt\"\r\n        }), this.filename + \".nomnoml\")\r\n    };\r\n    DownloadLinks.prototype.setFilename = function(filename) {\r\n        filename = filename || \"graph\";\r\n        this.filename = filename\r\n    };\r\n    return DownloadLinks\r\n}();\r\nvar __extends = this && this.__extends || function() {\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf || {\r\n            __proto__: []\r\n        }\r\n        instanceof Array && function(d, b) {\r\n            d.__proto__ = b\r\n        } || function(d, b) {\r\n            for (var p in b)\r\n                if (b.hasOwnProperty(p)) d[p] = b[p]\r\n        };\r\n        return extendStatics(d, b)\r\n    };\r\n    return function(d, b) {\r\n        extendStatics(d, b);\r\n\r\n        function __() {\r\n            this.constructor = d\r\n        }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __)\r\n    }\r\n}();\r\nvar FileSystem = function() {\r\n    function FileSystem() {\r\n        this.signals = new Observable;\r\n        this.on = this.signals.on;\r\n        this.off = this.signals.off;\r\n        this.storage = new DefaultGraphStore\r\n    }\r\n    FileSystem.prototype.files = function() {\r\n        return JSON.parse(localStorage[\"nomnoml.file_index\"] || \"[]\")\r\n    };\r\n    FileSystem.prototype.setFiles = function(index) {\r\n        localStorage[\"nomnoml.file_index\"] = JSON.stringify(index);\r\n        this.signals.trigger(\"updated\")\r\n    };\r\n    FileSystem.prototype.moveToFileStorage = function(name, source) {\r\n        var entry = {\r\n            name: name,\r\n            date: (new Date).toISOString(),\r\n            backingStore: \"local_file\"\r\n        };\r\n        var index = this.files();\r\n        index.push(entry);\r\n        index.sort(function(a, b) {\r\n            return a.name.localeCompare(b.name)\r\n        });\r\n        localStorage[\"nomnoml.file_index\"] = JSON.stringify(index);\r\n        var fileStore = new LocalFileGraphStore(entry.name);\r\n        fileStore.save(source);\r\n        this.signals.trigger(\"updated\")\r\n    };\r\n    FileSystem.prototype.moveToLocalStorage = function(source) {\r\n        this.storage = new DefaultGraphStore;\r\n        this.storage.save(source)\r\n    };\r\n    FileSystem.prototype.discard = function(entry) {\r\n        var fileStore = new LocalFileGraphStore(entry.name);\r\n        fileStore.clear();\r\n        this.setFiles(this.files().filter(function(e) {\r\n            return e.name != entry.name\r\n        }));\r\n        this.signals.trigger(\"updated\")\r\n    };\r\n    FileSystem.prototype.configureByRoute = function(path) {\r\n        var route = Route.from(path);\r\n        this.storage = this.routedStorage(route);\r\n        this.activeFile = nomnoml.skanaar.find(this.files(), function(e) {\r\n            return e.name === route.path\r\n        }) || {\r\n            name: route.path,\r\n            date: (new Date).toISOString(),\r\n            backingStore: \"local_file\"\r\n        };\r\n        this.signals.trigger(\"updated\")\r\n    };\r\n    FileSystem.prototype.routedStorage = function(route) {\r\n        if (route.context === \"view\") {\r\n            return new UrlGraphStore(decodeURIComponent(route.path))\r\n        }\r\n        if (route.context === \"file\") {\r\n            return new LocalFileGraphStore(route.path)\r\n        }\r\n        return new DefaultGraphStore\r\n    };\r\n    return FileSystem\r\n}();\r\nvar LocalGraphStore = function() {\r\n    function LocalGraphStore(key) {\r\n        this.key = key\r\n    }\r\n    LocalGraphStore.prototype.read = function() {\r\n        return localStorage[this.key]\r\n    };\r\n    LocalGraphStore.prototype.save = function(source) {\r\n        localStorage[this.key] = source\r\n    };\r\n    LocalGraphStore.prototype.clear = function() {\r\n        localStorage.removeItem(this.key)\r\n    };\r\n    return LocalGraphStore\r\n}();\r\nvar LocalFileGraphStore = function(_super) {\r\n    __extends(LocalFileGraphStore, _super);\r\n\r\n    function LocalFileGraphStore(key) {\r\n        var _this = _super.call(this, \"nomnoml.files/\" + key) || this;\r\n        _this.kind = \"local_file\";\r\n        return _this\r\n    }\r\n    return LocalFileGraphStore\r\n}(LocalGraphStore);\r\nvar DefaultGraphStore = function(_super) {\r\n    __extends(DefaultGraphStore, _super);\r\n\r\n    function DefaultGraphStore() {\r\n        var _this = _super.call(this, \"nomnoml.lastSource\") || this;\r\n        _this.kind = \"local_default\";\r\n        return _this\r\n    }\r\n    return DefaultGraphStore\r\n}(LocalGraphStore);\r\nvar UrlGraphStore = function() {\r\n    function UrlGraphStore(source) {\r\n        this.source = source;\r\n        this.kind = \"url\"\r\n    }\r\n    UrlGraphStore.prototype.read = function() {\r\n        return this.source\r\n    };\r\n    UrlGraphStore.prototype.save = function(source) {};\r\n    UrlGraphStore.prototype.clear = function() {};\r\n    return UrlGraphStore\r\n}();\r\nvar HoverMarker = function() {\r\n    function HoverMarker(className, elementToMark, hoverables) {\r\n        function classToggler(state) {\r\n            return function() {\r\n                if (state) elementToMark.classList.add(className);\r\n                else elementToMark.classList.remove(className)\r\n            }\r\n        }\r\n        for (var _i = 0, hoverables_1 = hoverables; _i < hoverables_1.length; _i++) {\r\n            var element = hoverables_1[_i];\r\n            element.addEventListener(\"mouseenter\", classToggler(true));\r\n            element.addEventListener(\"mouseleave\", classToggler(false))\r\n        }\r\n    }\r\n    return HoverMarker\r\n}();\r\nvar Observable = function() {\r\n    function Observable() {\r\n        this.callbacks = {}\r\n    }\r\n    Observable.prototype.on = function(event, fn) {\r\n        if (!this.callbacks[event]) {\r\n            this.callbacks[event] = []\r\n        }\r\n        this.callbacks[event].push(fn)\r\n    };\r\n    Observable.prototype.off = function(event, fn) {\r\n        var fns = this.callbacks[event];\r\n        if (fns) {\r\n            var index = fns.indexOf(fn);\r\n            if (index !== -1) fns.splice(index, 1);\r\n            if (fns.length === 0) delete this.callbacks[event]\r\n        }\r\n    };\r\n    Observable.prototype.trigger = function(event) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i]\r\n        }\r\n        var fns = this.callbacks[event];\r\n        if (fns) fns.forEach(function(fn) {\r\n            return fn.apply(null, args)\r\n        })\r\n    };\r\n    return Observable\r\n}();\r\nvar Route = function() {\r\n    function Route(context, path) {\r\n        this.context = context;\r\n        this.path = path\r\n    }\r\n    Route.from = function(hash) {\r\n        var slashIndex = hash.indexOf(\"/\");\r\n        if (hash[0] == \"#\" && slashIndex > -1) {\r\n            return {\r\n                context: Route.urlDecode(hash.substr(1, slashIndex - 1)),\r\n                path: Route.urlDecode(hash.substr(slashIndex + 1))\r\n            }\r\n        }\r\n        return {\r\n            context: null,\r\n            path: null\r\n        }\r\n    };\r\n    Route.urlEncode = function(unencoded) {\r\n        return encodeURIComponent(unencoded).replace(/'/g, \"%27\").replace(/\"/g, \"%22\")\r\n    };\r\n    Route.urlDecode = function(encoded) {\r\n        return decodeURIComponent(encoded.replace(/\\+/g, \" \"))\r\n    };\r\n    return Route\r\n}();\r\nvar Tooltips = function() {\r\n    function Tooltips(tooltip, links) {\r\n        for (var i = 0; i < links.length; i++) {\r\n            attach(links[i])\r\n        }\r\n\r\n        function attach(link) {\r\n            link.onmouseover = function() {\r\n                tooltip.textContent = link.getAttribute(\"title\")\r\n            };\r\n            link.onmouseout = function() {\r\n                tooltip.textContent = \"\"\r\n            }\r\n        }\r\n    }\r\n    return Tooltips\r\n}();\r\n\r\nfunction ensureType(template, obj) {\r\n    if (Array.isArray(template)) {\r\n        if (Array.isArray(obj)) {\r\n            if (template.length == 0) {\r\n                return obj\r\n            } else {\r\n                return obj.map(function(e) {\r\n                    return ensureType(template[0], e)\r\n                }).filter(function(e) {\r\n                    return e !== undefined\r\n                })\r\n            }\r\n        } else {\r\n            return undefined\r\n        }\r\n    }\r\n    if (\"number\" == typeof template) {\r\n        return \"number\" == typeof obj ? obj : undefined\r\n    }\r\n    if (\"string\" == typeof template) {\r\n        return \"string\" == typeof obj ? obj : undefined\r\n    }\r\n    if (\"boolean\" == typeof template) {\r\n        return \"boolean\" == typeof obj ? obj : undefined\r\n    }\r\n    if (\"object\" == typeof template) {\r\n        if (\"object\" == typeof obj) {\r\n            for (var key in template) {\r\n                if (ensureType(template[key], obj[key]) === undefined) return undefined\r\n            }\r\n            return obj\r\n        }\r\n    }\r\n    return undefined\r\n}\r\n\r\nfunction assert(actual) {\r\n    return {\r\n        equal: function(expected) {\r\n            equal(actual, expected)\r\n        }\r\n    }\r\n}\r\n\r\nfunction equal(a, b) {\r\n    if (a === b) return;\r\n    var as = JSON.stringify(a);\r\n    var bs = JSON.stringify(b);\r\n    if (as !== bs) throw new Error(as + \" != \" + bs)\r\n}\r\n\r\nfunction test_ensureType() {\r\n    assert(ensureType([], [])).equal([]);\r\n    assert(ensureType([], [0])).equal([0]);\r\n    assert(ensureType([0], [])).equal([]);\r\n    assert(ensureType([0], [0])).equal([0]);\r\n    assert(ensureType({\r\n        a: \"\"\r\n    }, {\r\n        a: \"\"\r\n    })).equal({\r\n        a: \"\"\r\n    });\r\n    assert(ensureType({\r\n        a: \"\"\r\n    }, {\r\n        a: 0\r\n    })).equal(undefined);\r\n    assert(ensureType([{\r\n        a: \"\"\r\n    }], [{\r\n        a: 0\r\n    }])).equal([])\r\n}\r\n\r\nfunction ExportMenu(selector, app) {\r\n    return new Vue({\r\n        el: selector,\r\n        data: {\r\n            shareLink: \"\"\r\n        },\r\n        mounted: function() {\r\n            var _this = this;\r\n            app.signals.on(\"source-changed\", function(src) {\r\n                return _this.onSourceChange(src)\r\n            });\r\n            app.filesystem.signals.on(\"updated\", function(src) {\r\n                return _this.$forceUpdate()\r\n            })\r\n        },\r\n        methods: {\r\n            downloadPng: function() {\r\n                app.downloader.pngDownload()\r\n            },\r\n            downloadSvg: function() {\r\n                app.downloader.svgDownload()\r\n            },\r\n            downloadSrc: function() {\r\n                app.downloader.srcDownload()\r\n            },\r\n            onSourceChange: function(src) {\r\n                this.shareLink = \"#view/\" + Route.urlEncode(src)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction FileMenu(selector, app) {\r\n    return new Vue({\r\n        el: selector,\r\n        data: {\r\n            source: \"\"\r\n        },\r\n        mounted: function() {\r\n            var _this = this;\r\n            app.signals.on(\"source-changed\", function(src) {\r\n                return _this.onSourceChange(src)\r\n            });\r\n            app.filesystem.signals.on(\"updated\", function(src) {\r\n                return _this.$forceUpdate()\r\n            })\r\n        },\r\n        methods: {\r\n            items: function() {\r\n                return app.filesystem.files()\r\n            },\r\n            isActive: function(item) {\r\n                return this.isLocalFile() && app.filesystem.activeFile.name === item.name\r\n            },\r\n            isLocalFile: function() {\r\n                return app.filesystem.storage.kind === \"local_file\"\r\n            },\r\n            isAtHome: function() {\r\n                return app.filesystem.storage.kind === \"local_default\"\r\n            },\r\n            itemPath: function(item) {\r\n                return \"#file/\" + encodeURIComponent(item.name).replace(/%20/g, \"+\")\r\n            },\r\n            discard: function(item) {\r\n                if (confirm('Permanently delete \"' + item.name + '\"')) app.filesystem.discard(item)\r\n            },\r\n            saveAs: function() {\r\n                var name = prompt(\"Name your diagram\");\r\n                if (name) {\r\n                    if (app.filesystem.files().some(function(e) {\r\n                            return e.name === name\r\n                        })) {\r\n                        alert(\"A file named \" + name + \" already exists.\");\r\n                        return\r\n                    }\r\n                    app.filesystem.moveToFileStorage(name, app.currentSource());\r\n                    location.href = \"#file/\" + encodeURIComponent(name)\r\n                }\r\n            },\r\n            loadSvg: function(e) {\r\n                var files = e.target.files;\r\n                app.handleOpeningFiles(files)\r\n            },\r\n            onSourceChange: function(src) {\r\n                this.source = src\r\n            }\r\n        }\r\n    })\r\n}\r\nvar icon = function() {\r\n    var icons = {\r\n        \"link-outline\": '<path d=\"M17.5 6c.3 0 .6.1.8.3.4.5.4 1.1 0 1.6l-1.7 1.7.3.3c.5.6.9 1.4.9 2.2s-.4 1.6-1 2.2l-4.1 4.2c-.6.5-1.4.9-2.2.9s-1.6-.4-2.2-1l-.3-.2-1.7 1.7a1 1 0 0 1-1.6 0c-.4-.5-.4-1.1 0-1.6l1.7-1.7-.3-.3c-.5-.6-.9-1.4-.9-2.2s.4-1.6 1-2.2l4.1-4.2c.6-.5 1.4-.8 2.2-.8s1.6.3 2.2.8l.3.3 1.7-1.7c.2-.2.5-.3.8-.3m0-2a3 3 0 0 0-2.2 1l-.5.4a5.2 5.2 0 0 0-5.9 1l-4.2 4a5 5 0 0 0-1 6l-.4.5a3 3 0 0 0 0 4.4 3 3 0 0 0 4.4 0l.5-.5a5 5 0 0 0 5.9-1l4.2-4a5 5 0 0 0 1-6l.4-.5a3 3 0 0 0 0-4.4 3 3 0 0 0-2.2-.9zm-6.1 7.2a2 2 0 0 0 2 2L11.6 15a2 2 0 0 0-2-2l1.8-1.8M12.5 9c-.2 0-.5.1-.6.3l-4.2 4.2c-.2.1-.3.4-.3.6 0 .2.1.5.3.6l.3.3.7-.7a1 1 0 0 1 1.6 0c.4.5.4 1.1 0 1.6l-.7.7.3.3c.1.2.4.3.6.3l.6-.3 4.2-4.2c.2-.1.3-.4.3-.6 0-.2-.1-.5-.3-.6l-.3-.3-.7.7a1 1 0 0 1-1.6 0c-.4-.5-.4-1.1 0-1.6l.7-.7-.3-.3a.9.9 0 0 0-.6-.3z\"/>',\r\n        \"camera-outline\": '<path d=\"M19 20h-14c-1.6 0-3-1.3-3-3v-8c0-1.6 1.3-3 3-3h1.5l1-1c.5-.5 1.5-1 2.4-1h4c.8 0 1.8.4 2.4 1l1 1h1.5c1.6 0 3 1.3 3 3v8c0 1.6-1.3 3-3 3zm-14-12c-.5 0-1 .4-1 1v8c0 .5.4 1 1 1h14c.5 0 1-.4 1-1v-8c0-.5-.4-1-1-1h-2c-.2 0-.52-.1-.7-.2l-1.2-1.2c-.2-.2-.7-.4-1-.4h-4c-.2 0-.7.2-1 .4l-1.2 1.2c-.1.1-.4.2-.7.2h-2zM12 10c1.3 0 2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5-2.5-1.1-2.5-2.5 1.1-2.5 2.5-2.5m0-1c-1.9 0-3.5 1.5-3.5 3.5 0 1.9 1.5 3.5 3.5 3.5s3.5-1.5 3.5-3.5c0-1.9-1.5-3.5-3.5-3.5zM18 8.6c-.7 0-1.3.5-1.3 1.3s.5 1.2 1.3 1.2 1.3-.58 1.3-1.2-.5-1.3-1.3-1.3z\"/>',\r\n        \"image-outline\": '<path d=\"M8.5 7.9c.8 0 1.5.6 1.5 1.5s-.6 1.5-1.5 1.5-1.5-.6-1.5-1.5.6-1.5 1.5-1.5m0-1c-1.3 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5zM16 11.9c.45.0 1.27 1.8 1.7 4.0h-11.3c.4-1.0 1.0-2.0 1.6-2.0.8 0 1.1.1 1.53.42.4.2 1.0.58 1.97.58 1.1 0 1.9-.8 2.6-1.6.6-.6 1.2-1.3 1.8-1.3m0-1c-2 0-3 3-4.5 3s-1.4-1-3.5-1c-2 0-3.0 4-3.0 4h14.0s-1-6-3-6zM22 6c0-1.1-.8-2-2-2h-16c-1.1 0-2 .8-2 2v12c0 1.1.8 2 2 2h16c1.1 0 2-.8 2-2v-12zm-2 12h-16v-12h16.0l-.0 12z\"/>',\r\n        \"download-outline\": '<path d=\"M20.9 17c0-.1-.0-.2-.0-.3l-2-6c-.1-.4-.5-.6-.9-.6h-.5l.6-.6c1.17-1.17 1.17-3.0 0-4.2-.81-.8-2.0-1.0-3.1-.7v-1.3c0-1.6-1.3-3-3-3s-3 1.3-3 3v1.3c-1.0-.3-2.3-.1-3.1.7-1.17 1.17-1.17 3.0.0 4.2l.68.6h-.5c-.4 0-.8.2-.9.6l-2 6c-.0.1-.0.2-.0.3-.0 0-.0 5-.0 5 0 .5.4 1 1 1h16c.5 0 1-.4 1-1 0 0 0-5-.0-5zm-13.6-10.5c.1-.1.4-.2.7-.2s.5.1.7.2l2.2 2.2v-5.7c0-.5.4-1 1-1s1 .4 1 1v5.7l2.2-2.2c.3-.3 1.0-.3 1.4 0 .3.39.3 1.0.0 1.4l-4.7 4.6-4.7-4.6c-.3-.3-.3-1.0 0-1.4zm-.5 5.5h1.8l3.4 3.41 3.4-3.41h1.8l1.6 5h-13.8l1.6-5zm12.2 9h-14v-3h14v3z\"/>',\r\n        \"document-add\": '<path d=\"M15 12h-2v-2c0-.5-.4-1-1-1s-1 .4-1 1v2h-2c-.5 0-1 .4-1 1s.4 1 1 1h2v2c0 .5.4 1 1 1s1-.4 1-1v-2h2c.5 0 1-.4 1-1s-.4-1-1-1zM19.7 7.2l-4-4c-.1-.1-.4-.2-.7-.2h-8c-1.6 0-3 1.3-3 3v12c0 1.6 1.3 3 3 3h10c1.6 0 3-1.3 3-3v-10c0-.2-.1-.52-.2-.7zm-2.1.7h-1.0c-.8 0-1.5-.6-1.5-1.5v-1.0l2.5 2.5zm-.5 11h-10c-.5 0-1-.4-1-1v-12c0-.5.4-1 1-1h7v1.5c0 1.3 1.1 2.5 2.5 2.5h1.5v9c0 .5-.4 1-1 1z\"/>',\r\n        \"home-outline\": '<path d=\"M22.2 10.4c-3.39-2.8-9.5-8.1-9.6-8.2l-.6-.5-.6.5c-.0.0-6.2 5.3-9.66 8.2-.4.3-.6.9-.6 1.5 0 1.1.8 2 2 2h1v6c0 1.1.8 2 2 2h12c1.1 0 2-.8 2-2v-6h1c1.1 0 2-.8 2-2 0-.5-.2-1.1-.7-1.5zm-8.2 9.5h-4v-5h4v5zm4-8l.0 8h-3.0v-6h-6v6h-3v-8h-3.0c2.7-2.3 7.3-6.2 9.0-7.68 1.6 1.4 6.2 5.3 9 7.6l-3-.0z\"/>'\r\n    };\r\n    return Vue.component(\"icon\", {\r\n        data: function() {\r\n            return {\r\n                svg: \"\"\r\n            }\r\n        },\r\n        props: [\"id\"],\r\n        mounted: function() {\r\n            var header = '<svg version=\"1.2\" baseProfile=\"tiny\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">';\r\n            this.svg = header + icons[this.id] + \"</svg>\"\r\n        },\r\n        template: '<i v-html=\"svg\"></i>'\r\n    })\r\n}();\r\n\r\nfunction StorageTools(selector, app) {\r\n    return new Vue({\r\n        el: selector,\r\n        mounted: function() {\r\n            var _this = this;\r\n            app.filesystem.signals.on(\"updated\", function(src) {\r\n                return _this.$forceUpdate()\r\n            })\r\n        },\r\n        methods: {\r\n            isUrlStorage: function() {\r\n                return app.filesystem.storage.kind == \"url\"\r\n            },\r\n            isLocalFileStorage: function() {\r\n                return app.filesystem.storage.kind == \"local_file\"\r\n            },\r\n            saveViewModeToStorage: function() {\r\n                app.saveViewModeToStorage()\r\n            }\r\n        }\r\n    })\r\n}\r\nvar nomnoml;\r\n(function(nomnoml) {\r\n    var skanaar;\r\n    (function(skanaar) {\r\n        skanaar.vector = {\r\n            dist: function(a, b) {\r\n                return skanaar.vector.mag(skanaar.vector.diff(a, b))\r\n            },\r\n            add: function(a, b) {\r\n                return {\r\n                    x: a.x + b.x,\r\n                    y: a.y + b.y\r\n                }\r\n            },\r\n            diff: function(a, b) {\r\n                return {\r\n                    x: a.x - b.x,\r\n                    y: a.y - b.y\r\n                }\r\n            },\r\n            mult: function(v, factor) {\r\n                return {\r\n                    x: factor * v.x,\r\n                    y: factor * v.y\r\n                }\r\n            },\r\n            mag: function(v) {\r\n                return Math.sqrt(v.x * v.x + v.y * v.y)\r\n            },\r\n            normalize: function(v) {\r\n                return skanaar.vector.mult(v, 1 / skanaar.vector.mag(v))\r\n            },\r\n            rot: function(a) {\r\n                return {\r\n                    x: a.y,\r\n                    y: -a.x\r\n                }\r\n            }\r\n        }\r\n    })(skanaar = nomnoml.skanaar || (nomnoml.skanaar = {}))\r\n})(nomnoml || (nomnoml = {}));\r\nvar nomnoml;\r\n(function(nomnoml) {\r\n    var skanaar;\r\n    (function(skanaar) {\r\n        function plucker(pluckerDef) {\r\n            switch (typeof pluckerDef) {\r\n                case \"undefined\":\r\n                    return function(e) {\r\n                        return e\r\n                    };\r\n                case \"string\":\r\n                    return function(obj) {\r\n                        return obj[pluckerDef]\r\n                    };\r\n                case \"number\":\r\n                    return function(obj) {\r\n                        return obj[pluckerDef]\r\n                    };\r\n                case \"function\":\r\n                    return pluckerDef\r\n            }\r\n        }\r\n        skanaar.plucker = plucker;\r\n\r\n        function max(list, plucker) {\r\n            var transform = skanaar.plucker(plucker);\r\n            var maximum = transform(list[0]);\r\n            for (var i = 0; i < list.length; i++) {\r\n                var item = transform(list[i]);\r\n                maximum = item > maximum ? item : maximum\r\n            }\r\n            return maximum\r\n        }\r\n        skanaar.max = max;\r\n\r\n        function sum(list, plucker) {\r\n            var transform = skanaar.plucker(plucker);\r\n            for (var i = 0, summation = 0, len = list.length; i < len; i++) summation += transform(list[i]);\r\n            return summation\r\n        }\r\n        skanaar.sum = sum;\r\n\r\n        function flatten(lists) {\r\n            var out = [];\r\n            for (var i = 0; i < lists.length; i++) out = out.concat(lists[i]);\r\n            return out\r\n        }\r\n        skanaar.flatten = flatten;\r\n\r\n        function find(list, predicate) {\r\n            for (var i = 0; i < list.length; i++)\r\n                if (predicate(list[i])) return list[i];\r\n            return undefined\r\n        }\r\n        skanaar.find = find;\r\n\r\n        function last(list) {\r\n            return list[list.length - 1]\r\n        }\r\n        skanaar.last = last;\r\n\r\n        function hasSubstring(haystack, needle) {\r\n            if (needle === \"\") return true;\r\n            if (!haystack) return false;\r\n            return haystack.indexOf(needle) !== -1\r\n        }\r\n        skanaar.hasSubstring = hasSubstring;\r\n\r\n        function format(template) {\r\n            var parts = [];\r\n            for (var _i = 1; _i < arguments.length; _i++) {\r\n                parts[_i - 1] = arguments[_i]\r\n            }\r\n            var matrix = template.split(\"#\");\r\n            var output = [matrix[0]];\r\n            for (var i = 0; i < matrix.length - 1; i++) {\r\n                output.push(parts[i] || \"\");\r\n                output.push(matrix[i + 1])\r\n            }\r\n            return output.join(\"\")\r\n        }\r\n        skanaar.format = format;\r\n\r\n        function merged(a, b) {\r\n            function assign(target, data) {\r\n                for (var key in data) target[key] = data[key]\r\n            }\r\n            var obj = {};\r\n            assign(obj, a);\r\n            assign(obj, b);\r\n            return obj\r\n        }\r\n        skanaar.merged = merged;\r\n\r\n        function indexBy(list, key) {\r\n            var obj = {};\r\n            for (var i = 0; i < list.length; i++) obj[list[i][key]] = list[i];\r\n            return obj\r\n        }\r\n        skanaar.indexBy = indexBy;\r\n\r\n        function uniqueBy(list, pluckerDef) {\r\n            var seen = {};\r\n            var getKey = skanaar.plucker(pluckerDef);\r\n            var out = [];\r\n            for (var i = 0; i < list.length; i++) {\r\n                var key = getKey(list[i]);\r\n                if (!seen[key]) {\r\n                    seen[key] = true;\r\n                    out.push(list[i])\r\n                }\r\n            }\r\n            return out\r\n        }\r\n        skanaar.uniqueBy = uniqueBy\r\n    })(skanaar = nomnoml.skanaar || (nomnoml.skanaar = {}))\r\n})(nomnoml || (nomnoml = {}));","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}